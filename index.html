<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClawWatch</title>
    
    <!-- Dynamic base URL for Tailscale /dashboard path -->
    <script>
        (function() {
            var base = document.createElement('base');
            var path = window.location.pathname;
            base.href = path.startsWith('/dashboard') ? '/dashboard/' : '/';
            document.head.appendChild(base);
        })();
    </script>
    
    <link rel="stylesheet" href="css/dashboard.css?v=42">
    
    <!-- EXTENSION POINT: Add additional stylesheets here -->
    <!-- <link rel="stylesheet" href="css/charts.css"> -->
    
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
</head>
<body>
    <!-- Animated Lobster Tank Background (OpenClaw style lobsters) -->
    <div class="lobster-tank" aria-hidden="true">
        <div class="tank-lobster l1">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <!-- OpenClaw-style lobster silhouette: rounded body, big claws, legs -->
                <!-- Body (main curved shell) -->
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <!-- Left claw -->
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <!-- Right claw -->
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <!-- Antennae -->
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <!-- Tail/back legs -->
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l2">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l3">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l4">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l5">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l6">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l7">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <!-- TOP EDGE LOBSTERS (horizontal swimmers) -->
        <div class="tank-lobster l8">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l9">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l10">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <!-- BOTTOM EDGE LOBSTERS (horizontal swimmers) -->
        <div class="tank-lobster l11">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l12">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="tank-lobster l13">
            <svg viewBox="0 0 120 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M60 8 C35 8 20 28 20 45 C20 62 32 78 45 82 L45 90 L55 90 L55 82 C55 82 60 84 65 82 L65 90 L75 90 L75 82 C88 78 100 62 100 45 C100 28 85 8 60 8Z"/>
                <path d="M25 38 C12 34 6 42 10 52 C14 62 25 58 28 48 C30 42 28 38 25 38Z"/>
                <path d="M95 38 C108 34 114 42 110 52 C106 62 95 58 92 48 C90 42 92 38 95 38Z"/>
                <path d="M48 12 Q38 4 32 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M72 12 Q82 4 88 6" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M45 90 L40 98 M55 90 L55 99 M65 90 L65 99 M75 90 L80 98" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
            </svg>
        </div>
    </div>
    
    <div class="dashboard">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="dashboard-title">
                <img src="assets/favicon.svg" alt="ClawWatch" class="logo">
                <div class="title-group">
                    <h1 class="title-text">ClawWatch</h1>
                    <span class="tagline">Keep your claws on the pulse.</span>
                </div>
            </div>
            
            <div class="header-controls">
                <div class="header-meta">
                    <span id="session-count">Loading...</span>
                    <span id="last-updated">—</span>
                </div>
                <span id="refresh-indicator"></span>
                <button id="pause-btn" class="btn btn-secondary"><span class="icon icon-pause"></span> Pause</button>
                <button id="refresh-btn" class="btn btn-primary"><span class="icon icon-refresh"></span> Refresh</button>
                <button id="settings-btn" class="btn btn-secondary" title="Settings"><span class="icon icon-settings"></span></button>
            </div>
        </header>
        
        <!-- Error Banner -->
        <div id="error-banner" class="error-banner"></div>
        
        <!-- View Tabs -->
        <div id="view-tabs" class="view-tabs"></div>
        
        <!-- Filter Panel (dropdown filters) -->
        <div id="filter-panel" class="filter-panel">
            <!-- Search Box -->
            <div class="filter-group filter-search-group">
                <div class="search-input-wrapper">
                    <span class="search-icon"></span>
                    <input type="text" id="search-input" class="search-input" placeholder="Search sessions...">
                </div>
            </div>
            
            <!-- Agent Dropdown -->
            <div class="filter-group">
                <label class="filter-label" for="agent-filter">Agent</label>
                <select id="agent-filter" class="filter-dropdown">
                    <option value="">All Agents</option>
                </select>
            </div>
            
            <!-- Node Dropdown -->
            <div class="filter-group">
                <label class="filter-label filter-label-with-icon" for="node-filter">
                    <span id="node-filter-icon" class="icon"></span>
                    Node
                </label>
                <select id="node-filter" class="filter-dropdown">
                    <option value="">All Nodes</option>
                </select>
            </div>
            
            <!-- Date Dropdown -->
            <div class="filter-group">
                <label class="filter-label" for="date-filter">Date</label>
                <select id="date-filter" class="filter-dropdown">
                    <option value="">All Time</option>
                    <option value="today">Today</option>
                    <option value="7days">Last 7 Days</option>
                    <option value="30days">Last 30 Days</option>
                </select>
            </div>
            
            <!-- Status Dropdown -->
            <div class="filter-group">
                <label class="filter-label" for="status-filter">Status</label>
                <select id="status-filter" class="filter-dropdown">
                    <option value="">All Statuses</option>
                    <option value="done">Done</option>
                    <option value="running">Running</option>
                    <option value="failed">Failed</option>
                </select>
            </div>
            
            <div class="filter-results">
                <span id="filter-count">—</span>
            </div>
        </div>
        
        <!-- Sessions Container -->
        <main id="sessions-container">
            <div class="loading">Loading sessions...</div>
        </main>
        
        <!-- EXTENSION POINT: Additional Panels -->
        <!--
        <aside id="charts-panel" class="charts-panel">
            <h2>Usage Stats</h2>
            <div id="chart-container"></div>
        </aside>
        -->
    </div>
    
    <!-- Modal for Session Detail -->
    <div id="session-modal" class="modal">
        <div id="modal-content" class="modal-content"></div>
    </div>
    
    <!-- Modal for Settings -->
    <div id="settings-modal" class="modal"></div>
    
    <!-- Developer Credit Footer -->
    <footer class="dashboard-footer">
        <span id="version-display"></span>
        <span>Developed by: <a href="https://fortheanlabs.com" target="_blank" rel="noopener">Forthean Labs LLC</a></span>
    </footer>
    
    <!-- Version Display Script -->
    <script>
        (function() {
            fetch('version.json?v=42')
                .then(r => r.json())
                .then(data => {
                    const el = document.getElementById('version-display');
                    if (el && data.version) {
                        el.textContent = 'v' + data.version + ' | ';
                    }
                })
                .catch(() => {}); // Silently fail if version.json unavailable
        })();
    </script>
    
    <!-- Scripts (order matters) -->
    <script src="js/icons.js?v=43"></script>
    <script src="js/config.js?v=43"></script>
    <script src="js/api.js?v=43"></script>
    <script src="js/components.js?v=43"></script>
    <script src="js/views.js?v=43"></script>
    <script src="js/export.js?v=43"></script>
    <script src="js/app.js?v=43"></script>
    
    <!-- EXTENSION POINT: Additional scripts -->
    <!-- <script src="js/charts.js"></script> -->
    <!-- <script src="js/notifications.js"></script> -->
</body>
</html>
